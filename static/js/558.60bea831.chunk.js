"use strict";(self.webpackChunkDDS_FRONT=self.webpackChunkDDS_FRONT||[]).push([[558],{2558:(e,r,t)=>{t.r(r),t.d(r,{default:()=>F});var a=t(9379),s=t(5043),o=t(9722),n=t(7070),i=t(3216),l=t(3670),c=t(1180),d=t(5036),h=t(3721),m=t(9866),x=t(9385),f=t(3243),u=t(7734),g=t(8791),p=t(5963),j=t(9489),y=t(2185),k=t(6026),b=t(5748),v=t(2291),C=t(6545),R=t(877),w=t(579);function S(e){let{title:r,children:t}=e;return(0,w.jsxs)("div",{style:{width:"100%",height:250,backgroundColor:"#ffffff",borderRadius:"10px",padding:"0.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[(0,w.jsx)("h3",{style:{color:"#112179ff",marginBottom:"0.5rem"},children:r}),t]})}const F=function(){const[e,r]=(0,s.useState)(null),[t,F]=(0,s.useState)("none"),[B,A]=(0,s.useState)(null),[D,T]=(0,s.useState)(!0),H=(0,i.Zp)();if((0,s.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return;const{userId:t}=(0,n.A)(e),a=await o.A.get("/user/getuser/".concat(t),{headers:{authorization:"Bearer ".concat(e)}});r(a.data),F(a.data.assurance||"none");const s={age:a.data.age,gender:a.data.gender,lifestyle:a.data.lifestyle||"average",chronic_conditions:a.data.chronic_conditions||0},i=await o.A.post("/rpc/assurance",s,{headers:{authorization:"Bearer ".concat(e)}});A(i.data)}catch(e){console.error("Assurance fetch error:",e)}finally{T(!1)}})()},[]),D)return(0,w.jsx)("p",{style:{textAlign:"center",marginTop:"2rem"},children:"Loading user and assurance..."});let K="You currently have no medical assurance.";return"normal"===t?K="Normal plan: covers 50% of illnesses, you are paying 180 DH/month. To change, update in your profile.":"premium"===t&&(K="Premium plan: covers 100% of illnesses, you are paying 365 DH/month. To change, update in your profile."),(0,w.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"3rem"},children:(0,w.jsxs)("div",{style:{maxWidth:"900px",width:"90%",backgroundColor:"#f9f9f9",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,w.jsx)("h2",{style:{color:"#112179ff",marginBottom:"1rem"},children:"My Medical Assurance"}),(0,w.jsx)("p",{style:{fontSize:"1.05rem",lineHeight:"1.6",color:"#333",marginBottom:"1.5rem"},children:K}),B&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"10px",padding:"1rem",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"1.5rem"},children:[(0,w.jsx)("h3",{style:{color:"#112179ff",marginBottom:"0.5rem"},children:"Suggested Plan (AI)"}),(0,w.jsxs)("p",{children:["Suggested Plan: ",(0,w.jsx)("b",{children:B.suggested_plan})]}),(0,w.jsxs)("p",{children:["Monthly Cost: ",(0,w.jsxs)("b",{children:[B.monthly_cost," DH"]})]}),(0,w.jsxs)("p",{children:["Coverage: ",(0,w.jsx)("b",{children:B.coverage})]}),(0,w.jsxs)("p",{children:["Risk Score: ",(0,w.jsxs)("b",{children:[B.risk_score.toFixed(2),"%"]})]})]}),(()=>{const e=B.risk_breakdown.map(e=>(0,a.A)((0,a.A)({},e),{},{value:Math.min(Math.max(e.value,0),100)})),r=e.reduce((e,r)=>e+r.value,0)/e.length;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("p",{style:{fontWeight:600,color:"#112179ff",marginBottom:"1rem"},children:["Overall Risk Score: ",(0,w.jsxs)("b",{children:[r.toFixed(1),"%"]})," \u2013 Higher scores indicate more urgent preventive action."]}),(0,w.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,w.jsx)("span",{style:{color:"#2ca02c"},children:"Low Risk \u2264 40%"}),(0,w.jsx)("span",{style:{color:"#ff7f0e"},children:"Medium Risk 41\u201370%"}),(0,w.jsx)("span",{style:{color:"#d62728"},children:"High Risk greater than 70%"})]}),(0,w.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[(0,w.jsx)(S,{title:"Risk Radar",children:(0,w.jsx)(c.u,{width:"100%",height:"100%",children:(0,w.jsxs)(C.V,{data:e,children:[(0,w.jsx)(d.z,{}),(0,w.jsx)(m.r,{dataKey:"name"}),(0,w.jsx)(h.E,{angle:30,domain:[0,100],tickFormatter:e=>"".concat(e,"%")}),(0,w.jsx)(x.V,{name:"Risk",dataKey:"value",stroke:"#ff7f0e",fill:"#ff7f0e",fillOpacity:.6}),(0,w.jsx)(l.m,{formatter:e=>"".concat(e,"%"),labelFormatter:e=>"Category: ".concat(e)})]})})}),(0,w.jsx)(S,{title:"Risk by Category (Bar)",children:(0,w.jsx)(c.u,{width:"100%",height:"100%",children:(0,w.jsxs)(v.E,{data:e,children:[(0,w.jsx)(u.d,{strokeDasharray:"3 3"}),(0,w.jsx)(y.W,{dataKey:"name"}),(0,w.jsx)(k.h,{tickFormatter:e=>"".concat(e,"%"),domain:[0,100]}),(0,w.jsx)(l.m,{formatter:e=>"".concat(e,"%"),labelFormatter:e=>"Category: ".concat(e)}),(0,w.jsx)(j.y,{dataKey:"value",fill:"#ff7f0e",label:{position:"top",formatter:e=>"".concat(e,"%")},children:e.map((e,r)=>{return(0,w.jsx)("cell",{fill:(t=e.value,t<=40?"#2ca02c":t<=70?"#ff7f0e":"#d62728")},"cell-".concat(r));var t})}),(0,w.jsx)(f.e,{y:50,stroke:"red",strokeDasharray:"3 3",label:"Max Acceptable"})]})})}),(0,w.jsx)(S,{title:"Risk Trend (Line)",children:(0,w.jsx)(c.u,{width:"100%",height:"100%",children:(0,w.jsxs)(b.b,{data:e,children:[(0,w.jsx)(u.d,{stroke:"#ccc"}),(0,w.jsx)(y.W,{dataKey:"name"}),(0,w.jsx)(k.h,{tickFormatter:e=>"".concat(e,"%"),domain:[0,100]}),(0,w.jsx)(l.m,{formatter:e=>"".concat(e,"%"),labelFormatter:e=>"Category: ".concat(e)}),(0,w.jsx)(g.N,{type:"monotone",dataKey:"value",stroke:"#2ca02c",strokeWidth:3,dot:{r:5}})]})})}),(0,w.jsx)(S,{title:"Cumulative Risk (Area)",children:(0,w.jsx)(c.u,{width:"100%",height:"100%",children:(0,w.jsxs)(R.Q,{data:e,children:[(0,w.jsx)("defs",{children:(0,w.jsxs)("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,w.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,w.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),(0,w.jsx)(y.W,{dataKey:"name"}),(0,w.jsx)(k.h,{tickFormatter:e=>"".concat(e,"%"),domain:[0,100]}),(0,w.jsx)(u.d,{strokeDasharray:"3 3"}),(0,w.jsx)(l.m,{formatter:e=>"".concat(e,"%"),labelFormatter:e=>"Category: ".concat(e)}),(0,w.jsx)(p.Gk,{type:"monotone",dataKey:"value",stroke:"#8884d8",fill:"url(#colorValue)"})]})})})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h4",{style:{marginBottom:"0.5rem"},children:"Category Recommendations:"}),e.map(e=>(0,w.jsxs)("p",{children:[(0,w.jsx)("b",{children:e.name}),": ",e.value,"% \u2013"," ",e.value>70?"High risk \u2013 consider preventive measures.":e.value>40?"Moderate risk \u2013 monitor closely.":"Low risk \u2013 maintain current habits."]},e.name))]})]})})()]}),(0,w.jsx)("button",{onClick:()=>H("/"),style:{marginTop:"2rem",padding:"0.6rem 1.2rem",backgroundColor:"#112179ff",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Back to Home"})]})})}}}]);
//# sourceMappingURL=558.60bea831.chunk.js.map