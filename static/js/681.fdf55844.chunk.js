"use strict";(self.webpackChunkDDS_FRONT=self.webpackChunkDDS_FRONT||[]).push([[681],{681:(e,a,r)=>{r.r(a),r.d(a,{default:()=>f});var s=r(2555),t=r(5043),n=r(3216),o=r(9722),l=r(2339),i=r(5089),m=r(9456),c=r(8271),d=r(5789),u=r(7070),p=r(579);o.A.defaults.baseURL="http://localhost:5000/api";const f=function(){const{userId:e}=(0,u.A)(localStorage.getItem("token")),a=(0,m.wA)(),{loading:r}=(0,m.d4)(e=>e.root),[f,h]=(0,t.useState)(""),g=(0,n.Zp)(),[x,y]=(0,t.useState)({firstname:"",lastname:"",email:"",age:"",mobile:"",gender:"neither",address:"",password:"",confpassword:""});(0,t.useEffect)(()=>{(async()=>{try{a((0,i.r1)(!0));const r=await(0,d.A)("/user/getuser/".concat(e));y((0,s.A)((0,s.A)({},r),{},{password:"",confpassword:"",mobile:null===r.mobile?"":r.mobile,age:null===r.age?"":r.age})),h(r.pic),a((0,i.r1)(!1))}catch(r){}})()},[a]);const b=e=>{const{name:a,value:r}=e.target;return y((0,s.A)((0,s.A)({},x),{},{[a]:r}))};return(0,p.jsx)(p.Fragment,{children:r?(0,p.jsx)(c.A,{}):(0,p.jsx)("section",{className:"register-section flex-center",children:(0,p.jsxs)("div",{className:"profile-container flex-center",children:[(0,p.jsx)("h2",{className:"form-heading",children:"Profile"}),(0,p.jsx)("img",{src:f,alt:"profile",className:"profile-pic"}),(0,p.jsxs)("form",{onSubmit:async e=>{try{e.preventDefault();const{firstname:a,lastname:r,email:t,age:n,mobile:i,address:m,gender:c,password:d,confpassword:u}=x;if(!t)return l.Ay.error("Email should not be empty");if(a.length<3)return l.Ay.error("First name must be at least 3 characters long");if(r.length<3)return l.Ay.error("Last name must be at least 3 characters long");if(d.length<5)return l.Ay.error("Password must be at least 5 characters long");if(d!==u)return l.Ay.error("Passwords do not match");await l.Ay.promise(o.A.put("/user/updateprofile",{firstname:a,lastname:r,age:n,mobile:i,address:m,gender:c,email:t,password:d},{headers:{authorization:"Bearer ".concat(localStorage.getItem("token"))}}),{pending:"Updating profile...",success:"Profile updated successfully",error:"Unable to update profile",loading:"Updating profile..."}),y((0,s.A)((0,s.A)({},x),{},{password:"",confpassword:""}))}catch(a){return l.Ay.error("Unable to update profile")}},className:"register-form",children:[(0,p.jsxs)("div",{className:"form-same-row",children:[(0,p.jsx)("input",{type:"text",name:"firstname",className:"form-input",placeholder:"Enter your first name",value:x.firstname,onChange:b}),(0,p.jsx)("input",{type:"text",name:"lastname",className:"form-input",placeholder:"Enter your last name",value:x.lastname,onChange:b})]}),(0,p.jsxs)("div",{className:"form-same-row",children:[(0,p.jsx)("input",{type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:x.email,onChange:b}),(0,p.jsxs)("select",{name:"gender",value:x.gender,className:"form-input",id:"gender",onChange:b,children:[(0,p.jsx)("option",{value:"neither",children:"-"}),(0,p.jsx)("option",{value:"male",children:"Male"}),(0,p.jsx)("option",{value:"female",children:"Female"})]})]}),(0,p.jsxs)("div",{className:"form-same-row",children:[(0,p.jsx)("input",{type:"text",name:"age",className:"form-input",placeholder:"Enter your age",value:x.age,onChange:b}),(0,p.jsx)("input",{type:"text",name:"mobile",className:"form-input",placeholder:"Enter your mobile number",value:null===x||void 0===x?void 0:x.mobile,onChange:b})]}),(0,p.jsx)("textarea",{type:"text",name:"address",className:"form-input",placeholder:"Enter your address",value:x.address,onChange:b,rows:"1"}),(0,p.jsxs)("div",{className:"form-same-row",children:[(0,p.jsx)("input",{type:"password",name:"password",className:"form-input",placeholder:"Enter your password",value:x.password,onChange:b}),(0,p.jsx)("input",{type:"password",name:"confpassword",className:"form-input",placeholder:"Confirm your password",value:x.confpassword,onChange:b})]}),(0,p.jsx)("button",{type:"submit",className:"btn form-btn",children:"update"})]}),(0,p.jsx)("button",{type:"button",className:"btn form-btn",style:{marginTop:"1rem",backgroundColor:"#112179ff"},onClick:()=>g("/"),children:"Back to Home"})]})})})}}}]);
//# sourceMappingURL=681.fdf55844.chunk.js.map